{% extends "base.html" %}

{% block title %}Home - EventEase{% endblock %}

{% block content %}
<h2 class="mb-5 text-center text-dark">🎉 Upcoming Events</h2>

{% if events %}
<div class="row row-cols-1 row-cols-md-3 g-4">
  {% for event in events %}
  <div class="col">
    <div class="card h-100 shadow-lg">
      {% if event.image_path %}
         <img src="{{ url_for('static', filename='images/events/' + event.image_path) }}" class="card-img-top" alt="Event Image">
      {% else %}
         <img src="{{ url_for('static', filename='images/default.jpg') }}" class="card-img-top" alt="Default Event Image">
      {% endif %}

      <div class="card-body d-flex flex-column">
        <h5 class="card-title">{{ event.title }}</h5>
        <p class="card-text"><strong>📅 Date:</strong> {{ event.date }}</p>
        <p class="card-text"><strong>📍 Location:</strong> {{ event.location }}</p>
        <p class="card-text">{{ event.description }}</p>

        {% if current_user.is_authenticated and not current_user.is_admin %}
        <a href="{{ url_for('register_event', event_id=event.id) }}" class="btn btn-success mt-auto">Register</a>
        {% elif not current_user.is_authenticated %}
        <p class="mt-3"><small><a href="{{ url_for('auth.login') }}">Login</a> to register for events.</small></p>
        {% endif %}
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
<p class="text-light">No events available.</p>
{% endif %}

{% endblock %}
